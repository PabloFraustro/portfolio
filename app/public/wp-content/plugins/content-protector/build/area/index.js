(()=>{"use strict";var t={n:e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},d:(e,a)=>{for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=window.wp.blocks,a=JSON.parse('{"u2":"content-protector/area"}');function o(){return o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},o.apply(this,arguments)}const n=window.wp.element,r=window.wp.blockEditor,s=window.wp.components,i=window.wp.data,p=window.wp.apiFetch;var d=t.n(p);const{__}=wp.i18n;(0,e.getBlockType)("content-protector/area")||(0,e.registerBlockType)(a.u2,{title:"Protected Area",edit:function(t){let{attributes:e,setAttributes:a}=t;const p=(0,r.useBlockProps)(),{area_id:l,headline:c,instruction:_,buttonLabel:u,placeholder:m}=e,[g,b]=(0,n.useState)(),[h,f]=(0,n.useState)(!1),[w,v]=(0,n.useState)(!1),y=(0,i.useSelect)((t=>{const{getEntityRecords:e}=t("core");return e("postType","protected_areas",{per_page:-1,order:"asc",status:"publish"})}),[]),E=t=>{switch(t){case"form":let t={background:area_data.options.form_background_color,borderRadius:area_data.options.form_border_radius};return area_data.options.form_margin&&(t.margin=area_data.options.form_margin.top+" "+area_data.options.form_margin.right+" "+area_data.options.form_margin.bottom+" "+area_data.options.form_margin.left),area_data.options.form_padding&&(t.padding=area_data.options.form_padding.top+" "+area_data.options.form_padding.right+" "+area_data.options.form_padding.bottom+" "+area_data.options.form_padding.left),t;case"headline":return{color:area_data.options.headline_font_color,fontSize:area_data.options.headline_font_size,fontWeight:area_data.options.headline_font_weight};case"instruction":return{color:area_data.options.instruction_font_color,fontSize:area_data.options.instruction_font_size,fontWeight:area_data.options.instruction_font_weight};case"button":let e={background:area_data.options.button_background_color,borderRadius:area_data.options.button_border_radius,color:area_data.options.button_font_color,fontSize:area_data.options.button_font_size,fontWeight:area_data.options.button_font_weight,textAlign:"center"};return area_data.options.button_margin&&(e.margin=area_data.options.button_margin.top+" "+area_data.options.button_margin.right+" "+area_data.options.button_margin.bottom+" "+area_data.options.button_margin.left),area_data.options.button_padding&&(e.padding=area_data.options.button_padding.top+" "+area_data.options.button_padding.right+" "+area_data.options.button_padding.bottom+" "+area_data.options.button_padding.left),e}};return(0,n.useEffect)((()=>{b(y),d()({path:"/passster/v1/meta?meta_key=passster_protection_type&post_id="+l}).then((t=>{"recaptcha"==JSON.parse(t).data?v(!0):v(!1)}))}),[y]),(0,n.createElement)(n.Fragment,null,(0,n.createElement)(r.InspectorControls,null,(0,n.createElement)(s.PanelBody,{title:__("Protected Area","content-protector"),initialOpen:!0},y&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(s.SelectControl,{label:__("Select protected area","content-protector"),value:l,options:(()=>{if(!g)return[];const t=[];return t.push({label:__("No Area","content-protector"),value:0}),g.map((function(e){return e.title.raw&&""!==e.title.raw&&t.push({label:e.title.raw,value:e.id}),e})),t})(),onChange:t=>{a({area_id:t})}}),h?(0,n.createElement)(s.Button,{onClick:()=>{d()({path:"/passster/v1/areas"}).then((t=>{b(t)})),f(!1)},variant:"secondary"},__("Get updated areas","content-protector")):(0,n.createElement)(s.Button,{onClick:()=>{window.open(area_data.create_area_url,"_blank").focus(),f(!0)},variant:"primary"},__("Create a new area","content-protector"))))),(0,n.createElement)("div",(0,r.useBlockProps)(),(0,n.createElement)("div",{className:"passster-form",id:`ps-${l}`,style:E("form")},(0,n.createElement)("div",{className:"password-form"},(0,n.createElement)(r.RichText,o({},p,{tagName:"h4",onChange:t=>{a({headline:t})},value:c,style:E("headline")})),(0,n.createElement)(r.RichText,o({},p,{tagName:"p",onChange:t=>{a({instruction:t})},value:_,style:E("instruction")})),!w&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(s.TextControl,o({},p,{onChange:t=>{a({placeholder:t})},value:m,id:"passster_password",className:"passster-password"})),area_data.options.show_password&&(0,n.createElement)("label",{htmlFor:"passster-password-hint",style:{fontWeight:"400",marginBottom:"10px",display:"block"}},(0,n.createElement)("input",{name:"passster-password-hint",id:"passster-password-hint",type:"checkbox"}),__("Show Password","content-protector"))),(0,n.createElement)(s.TextControl,o({},p,{onChange:t=>{a({buttonLabel:t})},value:u,className:"passster-submit",style:E("button")})),(0,n.createElement)("small",{className:"ps-preview-notice"},__("This is just a preview. To actually unlock the content visit the post/page on your website.","content-protector"))))))},save:()=>null})})();